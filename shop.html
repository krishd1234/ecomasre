<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Shop deka clouthess - Men, Women, New Arrivals, Best Sellers. Minimalist fashion with filters by price, size, and category.">
  <title>Shop | deka clouthess</title>
  <link rel="stylesheet" href="css/styles.css">
</head>
<body>
  <div class="banner">
    Free shipping on orders over ₹1000 | <a href="shop.html">Shop Now</a>
  </div>

  <header class="header">
    <div class="header-inner container">
      <a href="index.html" class="logo">deka <span>clouthess</span></a>
      <nav class="nav-desktop">
        <ul>
          <li><a href="index.html">Home</a></li>
          <li><a href="shop.html">Shop</a></li>
          <li><a href="about.html">About</a></li>
          <li><a href="contact.html">Contact</a></li>
        </ul>
      </nav>
      <div class="header-actions">
        <button class="search-toggle" aria-label="Search">
          <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/></svg>
        </button>
        <a href="cart.html" class="cart-toggle cart-count">
          <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"/><line x1="3" y1="6" x2="21" y2="6"/><path d="M16 10a4 4 0 0 1-8 0"/></svg>
          <span class="badge" style="display: none;">0</span>
        </a>
        <button class="menu-toggle" aria-label="Menu"><span></span><span></span><span></span></button>
      </div>
    </div>
    <nav class="nav-mobile">
      <ul>
        <li><a href="index.html">Home</a></li>
        <li><a href="shop.html">Shop</a></li>
        <li><a href="about.html">About</a></li>
        <li><a href="contact.html">Contact</a></li>
      </ul>
    </nav>
  </header>

  <div class="search-overlay">
    <button class="search-close" aria-label="Close">&times;</button>
    <form action="shop.html" method="get">
      <input type="search" name="q" placeholder="Search products..." autocomplete="off">
    </form>
  </div>

  <main>
    <section class="shop-header">
      <div class="container">
        <h1>Shop All</h1>
        <p>Discover our curated collection of minimalist essentials</p>
      </div>
    </section>

    <section class="section">
      <div class="container">
        <!-- Category Tabs -->
        <div style="display: flex; flex-wrap: wrap; gap: 0.5rem; margin-bottom: 2rem; justify-content: center;" id="category-tabs">
          <a href="shop.html" class="btn btn-outline category-tab" data-cat="" style="padding: 0.5rem 1rem; font-size: 0.875rem;">All</a>
          <a href="shop.html?category=men" class="btn btn-outline category-tab" data-cat="men" style="padding: 0.5rem 1rem; font-size: 0.875rem;">Men</a>
          <a href="shop.html?category=women" class="btn btn-outline category-tab" data-cat="women" style="padding: 0.5rem 1rem; font-size: 0.875rem;">Women</a>
          <a href="shop.html?category=new" class="btn btn-outline category-tab" data-cat="new" style="padding: 0.5rem 1rem; font-size: 0.875rem;">New Arrivals</a>
          <a href="shop.html?category=best" class="btn btn-outline category-tab" data-cat="best" style="padding: 0.5rem 1rem; font-size: 0.875rem;">Best Sellers</a>
        </div>

        <!-- Filters -->
        <div class="shop-filters">
          <input type="text" class="search-box" id="search-box" placeholder="Search products...">
          <div class="filter-group">
            <label>Category:</label>
            <select id="filter-category">
              <option value="">All</option>
              <option value="men">Men</option>
              <option value="women">Women</option>
            </select>
          </div>
          <div class="filter-group">
            <label>Price:</label>
            <select id="filter-price">
              <option value="">All</option>
              <option value="200-400">₹200 - ₹400</option>
              <option value="400-600">₹400 - ₹600</option>
              <option value="600-800">₹600 - ₹800</option>
              <option value="800-1000">₹800 - ₹1000</option>
            </select>
          </div>
          <div class="filter-group">
            <label>Size:</label>
            <select id="filter-size">
              <option value="">All</option>
              <option value="XS">XS</option>
              <option value="S">S</option>
              <option value="M">M</option>
              <option value="L">L</option>
              <option value="XL">XL</option>
            </select>
          </div>
        </div>

        <div class="product-grid" id="shop-products"></div>
        <p id="no-results" style="display: none; text-align: center; color: var(--color-text-muted); padding: 3rem;">No products match your filters.</p>
      </div>
    </section>
  </main>

  <footer class="footer">
    <div class="container">
      <div class="footer-grid">
        <div>
          <a href="index.html" class="logo" style="color: var(--color-white); margin-bottom: 1rem; display: inline-block;">deka <span style="color: var(--color-beige);">clouthess</span></a>
          <p style="color: rgba(255,255,255,0.7); max-width: 280px;">Minimalist fashion for the conscious.</p>
        </div>
        <div><h4>Shop</h4><ul><li><a href="shop.html?category=men">Men</a></li><li><a href="shop.html?category=women">Women</a></li><li><a href="shop.html?category=new">New Arrivals</a></li><li><a href="shop.html?category=best">Best Sellers</a></li></ul></div>
        <div><h4>Company</h4><ul><li><a href="about.html">About</a></li><li><a href="contact.html">Contact</a></li></ul></div>
        <div><h4>Follow</h4><div class="social-links"><a href="#">IG</a><a href="#">TW</a><a href="#">PN</a></div></div>
      </div>
      <div class="footer-bottom">&copy; 2025 deka clouthess.</div>
    </div>
  </footer>

  <script src="js/data.js"></script>
  <script src="js/main.js"></script>
  <script>
    const params = new URLSearchParams(location.search);
    const urlCategory = params.get('category');
    const urlQuery = params.get('q');

    function filterProducts() {
      let list = [...PRODUCTS];
      const search = document.getElementById('search-box').value.toLowerCase();
      const cat = document.getElementById('filter-category').value;
      const price = document.getElementById('filter-price').value;
      const size = document.getElementById('filter-size').value;

      if (urlCategory) {
        if (urlCategory === 'new') list = list.filter(p => p.badge === 'New');
        else if (urlCategory === 'best') list = list.filter(p => p.badge === 'Best Seller');
        else list = list.filter(p => p.category === urlCategory);
      }

      if (search) list = list.filter(p => p.name.toLowerCase().includes(search));
      if (cat) list = list.filter(p => p.category === cat);
      if (price) {
        const [min, max] = price.replace(/[₹$]/g, '').split('-').map(v => v === '+' ? Infinity : parseInt(v));
        list = list.filter(p => p.price >= min && (max === undefined || p.price <= max));
      }
      // Size filter would need product data with sizes - we keep all for demo

      renderProducts(list);
      document.getElementById('no-results').style.display = list.length === 0 ? 'block' : 'none';
    }

    function renderProducts(list) {
      const container = document.getElementById('shop-products');
      container.innerHTML = list.map(p => `
        <article class="product-card">
          <a href="product.html?id=${p.id}">
            <div class="product-image">
              ${p.badge ? `<span class="product-badge">${p.badge}</span>` : ''}
              <img src="${p.image}" alt="${p.name}" loading="lazy">
            </div>
            <div class="product-info">
              <p class="product-category">${p.category}</p>
              <h3 class="product-name">${p.name}</h3>
              <p class="product-price">${p.originalPrice ? `<span class="original">₹${p.originalPrice}</span>` : ''}₹${p.price}</p>
            </div>
          </a>
          <a href="product.html?id=${p.id}" class="product-quick-add">Quick Add</a>
        </article>
      `).join('');
    }

    document.getElementById('search-box').value = urlQuery || '';
    if (urlCategory) document.getElementById('filter-category').value = ['men','women'].includes(urlCategory) ? urlCategory : '';
    document.getElementById('search-box').addEventListener('input', filterProducts);
    document.getElementById('filter-category').addEventListener('change', filterProducts);
    document.getElementById('filter-price').addEventListener('change', filterProducts);
    document.getElementById('filter-size').addEventListener('change', filterProducts);

    filterProducts();

    document.querySelectorAll('.category-tab').forEach(tab => {
      if (tab.dataset.cat === (urlCategory || '')) {
        tab.classList.add('btn');
        tab.classList.remove('btn-outline');
        tab.style.background = 'var(--color-black)';
        tab.style.color = 'var(--color-white)';
        tab.style.borderColor = 'var(--color-black)';
      }
    });

    const menuToggle = document.querySelector('.menu-toggle');
    const navMobile = document.querySelector('.nav-mobile');
    if (menuToggle && navMobile) {
      menuToggle.addEventListener('click', () => {
        menuToggle.classList.toggle('active');
        navMobile.classList.toggle('active');
      });
    }
  </script>
</body>
</html>
